# YouTube Timestamped Notes
YouTube動画の視聴中に重要なポイントを**タイムスタンプ付きで記録**し、記録したメモから**動画の特定時点にすぐにジャンプ**できるようにすることで、学習・リサーチ効率を向上させる拡張機能。

> **📚 設計ドキュメント**: 技術的な詳細については、[基本設計書](docs/基本設計書.md)を参照してください。

## 📦 インストール方法

### 1. 拡張機能の準備

1. このリポジトリをクローンまたはダウンロードします

### 2. Google Chromeへの導入

1. Google Chromeを開きます
2. アドレスバーに `chrome://extensions/` と入力してEnterキーを押します
   - または、メニュー（⋮）→「拡張機能」→「拡張機能を管理」からアクセスできます
3. 右上の「デベロッパーモード」をONにします
4. 左上の「パッケージ化されていない拡張機能を読み込む」をクリックします
5. **`extension`フォルダを選択します**（⚠️ 重要：プロジェクトルートではなく、`extension`フォルダを選択してください）
   - プロジェクト構造：
     ```
     youtube_timestamped_notes/
     ├── extension/          ← このフォルダを読み込む
     │   ├── manifest.json
     │   ├── js/             # JavaScriptファイル
     │   │   ├── background.js
     │   │   ├── content.js
     │   │   ├── options.js
     │   │   └── popup.js
     │   ├── css/            # CSSファイル
     │   │   ├── content.css
     │   │   ├── options.css
     │   │   └── popup.css
     │   ├── html/           # HTMLファイル
     │   │   ├── options.html
     │   │   └── popup.html
     │   └── icons/          # アイコンファイル
     │       ├── icon16.png
     │       ├── icon48.png
     │       └── icon128.png
     ├── docs/
     │   └── 要件定義書.md
     └── README.md
     ```
6. 拡張機能が一覧に表示されればインストール完了です

> **💡 補足**: Chrome拡張機能は、`manifest.json`が含まれるフォルダを読み込む必要があります。このプロジェクトでは、拡張機能用のファイルは`extension`フォルダにまとめられており、拡張子ごとに`js/`、`css/`、`html/`フォルダに整理されています。`manifest.json`は`extension`フォルダのルートに配置されているため、このフォルダを選択してください。

## ✨ 主な機能

### 📝 メモの作成・保存
- **ページ内フォーム**: 動画ページ上で直接メモを追加できます（拡張機能のアイコンを探す必要がありません）
- **ポップアップ**: 拡張機能のアイコンをクリックしてメモを追加することも可能
- 現在の再生時間が自動で記録されます
- メモは動画ごとに管理され、時間順に自動ソートされます

### 📋 ページ内メモ表示
- 動画ページ上にメモ一覧を表示
- **折り畳み機能**: メモ一覧を折りたたんで表示領域を節約できます
- **自動更新**: 他の動画に遷移すると、自動的に現在の動画のメモ一覧に更新されます
- 各メモにはタイムスタンプ（例：02:30）とメモ内容が表示されます
- メモ件数がヘッダーに表示されます

### ⏯️ タイムスタンプジャンプ
- メモのタイムスタンプボタンをクリックすると、その時間に動画がジャンプします
- オプションページからも他の動画のメモにジャンプできます

### 🗑️ メモの削除
- 各メモ項目の右側にある「×」ボタンでメモを削除できます
- 削除前に確認ダイアログが表示されます

### 📊 グローバルメモ一覧（オプションページ）
- すべての動画のメモを一覧表示
- 動画ごとにグループ化されて表示されます
- 各メモから動画の特定時点に直接ジャンプできます

**オプションページの開き方**:
1. **方法1（推奨）**: 拡張機能のアイコンを右クリック → 「オプション」を選択
2. **方法2**: `chrome://extensions/` を開く → 拡張機能の「詳細」をクリック → 「拡張機能のオプション」をクリック

## ✅ 動作確認方法

### 基本機能の確認

#### 1. メモの作成・保存（ページ内フォーム）

1. YouTubeで任意の動画ページ（`https://www.youtube.com/watch?v=...`）を開きます
2. 動画ページ上に表示される「📝 メモ一覧」セクションの右上にある「＋ メモ追加」ボタンをクリックします
3. メモ追加フォームが表示され、現在の再生時間が自動で表示されることを確認します
4. メモ内容を入力します
5. 「💾 保存」ボタンをクリックします
6. メモが保存され、メモ一覧に表示されることを確認します

**代替方法（ポップアップ）**:
1. ブラウザのツールバーにある拡張機能のアイコンをクリックします
2. ポップアップが表示され、動画タイトルと現在の再生時間が表示されます
3. メモ内容を入力して「💾 メモを保存」ボタンをクリックします

#### 2. ページ内メモ表示

1. メモを保存した後、動画ページをリロードします
2. **「📝 メモ一覧」セクションが表示される位置を確認します**：
   - **推奨位置**: 動画プレーヤーの下、動画の説明欄（タイトル、チャンネル名、説明文など）の上
   - **代替位置**: 動画プレーヤーの直下
   - メモがない場合は「メモがありません。」と表示され、「＋ メモ追加」ボタンが表示されます
3. 保存したメモが一覧表示されることを確認します
4. 各メモにはタイムスタンプ（例：02:30）とメモ内容が表示されることを確認します
5. ヘッダーの折り畳みボタン（▼）をクリックして、メモ一覧を折りたたむ/展開できることを確認します
6. **動画遷移の確認**: 別の動画に遷移すると、自動的に現在の動画のメモ一覧に更新されることを確認します

> **💡 ヒント**: メモ一覧が表示されない場合：
> - ページを完全にリロード（Ctrl+Shift+R または Cmd+Shift+R）してみてください
> - 拡張機能が有効になっているか確認してください
> - ブラウザの開発者ツール（F12）でコンソールエラーを確認してください

#### 3. ページ内ジャンプ機能

1. 動画ページに表示されているメモ一覧で、任意のタイムスタンプボタン（赤いボタン）をクリックします
2. 動画の再生位置が、そのタイムスタンプの時間に移動することを確認します
3. 動画が指定された時間から再生されることを確認します

#### 4. メモの削除

1. メモ一覧の各メモ項目の右側にある「×」ボタンをクリックします
2. 確認ダイアログが表示されることを確認します
3. 「OK」をクリックすると、メモが削除され、メモ一覧が更新されることを確認します

#### 5. グローバルメモ一覧（オプションページ）

**オプションページを開く**:
- **方法1（推奨）**: ブラウザのツールバーにある拡張機能のアイコンを**右クリック** → 「オプション」を選択
- **方法2**: アドレスバーに `chrome://extensions/` と入力してEnter → 拡張機能「YouTube Timestamped Notes」の「詳細」をクリック → 「拡張機能のオプション」をクリック

**動作確認**:
1. オプションページが開き、保存したすべてのメモが表示されることを確認します
2. メモは動画ごとにグループ化され、各動画のタイトルとメモ件数が表示されることを確認します
3. 各メモのタイムスタンプボタンをクリックします
4. 新しいタブでYouTubeが開き、指定した時間から動画が再生されることを確認します

### エッジケースの確認

#### 複数のメモの保存

1. 同じ動画で複数のメモを異なる時間に保存します
2. メモが時間順にソートされて表示されることを確認します

#### 複数の動画でのメモ保存

1. 異なる動画でそれぞれメモを保存します
2. オプションページで、すべての動画のメモが表示されることを確認します
3. 動画を切り替えると、メモ一覧が自動的に現在の動画のものに更新されることを確認します

#### メモの削除

1. メモを削除して、メモ一覧が更新されることを確認します
2. すべてのメモを削除すると、メモ一覧が空の状態になることを確認します

#### 動画ページ以外での動作

1. YouTubeの動画ページ以外（例：ホームページ）で拡張機能のアイコンをクリックします
2. エラーメッセージが適切に表示されることを確認します

## 🐛 トラブルシューティング

### メモが表示されない場合

- 動画ページをリロードしてみてください
- ブラウザの開発者ツール（F12）でコンソールエラーを確認してください
- 拡張機能が有効になっているか確認してください

### タイムスタンプボタンが動作しない場合

- 動画が読み込まれていることを確認してください
- ページをリロードしてみてください

### メモ追加フォームが表示されない場合

- ページをリロードしてみてください
- 動画が再生中であることを確認してください

### データが保存されない場合

- ブラウザのストレージ容量を確認してください
- 拡張機能の権限（storage）が有効になっているか確認してください
- メモ内容が空でないことを確認してください

## 📝 注意事項

- この拡張機能はChromeのローカルストレージにデータを保存します
- ブラウザのデータを削除すると、保存したメモも削除されます
- データのバックアップが必要な場合は、定期的にエクスポート機能を実装することを検討してください
- メモは動画IDごとに管理されるため、同じ動画の異なるURL（例：プレイリストからのURL）では別のメモとして扱われる場合があります

## 🎯 使い方のコツ

### 効率的なメモの取り方
1. **ページ内フォームを活用**: 拡張機能のアイコンを探す必要がなく、動画ページ上で直接メモを追加できます
2. **折り畳み機能**: メモ一覧が長い場合は、折り畳みボタンで表示領域を節約できます
3. **タイムスタンプジャンプ**: メモのタイムスタンプをクリックして、すぐにその時点に戻れます
4. **オプションページ**: 複数の動画のメモを一元管理できます

### メモの管理
- 不要なメモは「×」ボタンで削除できます
- メモは時間順に自動ソートされるため、時系列で整理されます
- オプションページで全動画のメモを確認できます
- 動画を切り替えると、メモ一覧が自動的に更新されるため、常に現在の動画のメモが表示されます
